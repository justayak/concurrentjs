window.Thread=function(){function c(a){var b="string"===typeof a;if(!b&&"function"!==typeof a)throw"[concurrent.js] threadFunction must be a function!";this.onmessages=[];if(d){if(!b){a=a.toString();for(var b=-1,e=0;e<a.length;e++){var h=a.charAt(e);if("{"===h){b=e;break}}for(var f=-1,e=a.length;0<e;e--)if(h=a.charAt(e),"}"===h){f=e;break}a=a.substring(b+1,f)}a=new Blob([a]);a=new Worker(URL.createObjectURL(a));var c=this;a.onmessage=function(a){for(var b=0;b<c.onmessages.length;b++)c.onmessages[b].call(c,
    a)};this.worker=a}else throw"[concurrent.js] Real multithreading is not available. Cannot create Thread. Try 'new Thread.Simple(..)'";}function k(a,b,e,c){a.onmessage(function(a){e[b]=a;c()})}function g(a){if("function"!==typeof a)throw"[concurrent.js] threadFunction must be a function!";d?this._innerThread=new c("self.onmessage="+a.toString()):(this._onMessage=a,this.onmessages=[])}var d=!0;"undefined"===typeof window.Worker&&(console.error("[concurrent.js] Webworkers are not available but required!"),
    d=!1);window.URL=window.URL||window.webkitURL;"undefined"===typeof window.Blob&&(console.error("[concurrent.js] Blob required!"),d=!1);"undefined"===typeof window.URL&&(console.error("[concurrent.js] URL required!"),d=!1);c.available=d;c.prototype.onmessage=function(a){this.onmessages.push(a);return this};c.prototype.postMessage=function(a){this.worker.postMessage(a);return this};c.prototype.terminate=function(){Worker.prototype.terminate.call(this.worker);return this};c.join=function(a,b){if("function"!=
    typeof b)throw"[concurrent.js] 2. Parameter must be a function";if(!(a instanceof Array))throw"[concurrent.js] 1. Parameter must be an Array of Threads";for(var c=Array(a.length),d=a.length,f=0;f<a.length;f++)k(a[f],f,c,function(){d-=1;0==d&&b(c)})};d||(window.__currentCtx=null,window.postMessage=function(a){if(null===__currentCtx)throw"[concurrent.js] Thread Error --\x3e undetermined threading target!";for(var b=0;b<__currentCtx.onmessages.length;b++)__currentCtx.onmessages[b].call(__currentCtx,
    {data:a});__currentCtx=null});g.prototype.onmessage=function(a){if(d)this._innerThread.onmessage(a);else this.onmessages.push(a);return this};g.prototype.postMessage=function(a){if(d)this._innerThread.postMessage(a);else{var b=this;setTimeout(function(){__currentCtx=b;b._onMessage.call(b,{data:a})},1)}return this};g.prototype.terminate=function(){d&&this._innerThread.terminate();return this};c.Simple=g;return c}();